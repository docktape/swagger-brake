buildscript {
    repositories {
        mavenCentral()
        gradlePluginPortal()
    }
    dependencies {
        classpath("com.gradleup.shadow:shadow-gradle-plugin:9.3.0")
    }
}

repositories {
    mavenCentral()
}

apply plugin: 'com.gradleup.shadow'

dependencies {
    implementation project(":swagger-brake")
    implementation "ch.qos.logback:logback-core:1.5.18"
    implementation "ch.qos.logback:logback-classic:1.5.18"
    testImplementation 'org.junit.jupiter:junit-jupiter:6.0.1'
    testRuntimeOnly  'org.junit.platform:junit-platform-launcher'
}

jar {
    enabled = true
    manifest {
        attributes 'Main-Class': 'com.docktape.swagger.brake.cli.SwaggerBrakeMain'
    }
}

shadowJar {
    archiveBaseName = 'swagger-brake'
    archiveClassifier = 'cli'
}

project.tasks.assemble.dependsOn project.tasks.shadowJar

tasks.named('test', Test) {
    useJUnitPlatform()

    testLogging {
        events "passed"
    }
}